$(function(){location.hash="";var o,i,l=function(e){return e<2?2:e<4?3:e<6?4:e<10?5:e<15?8:10},n=function(e){return Math.floor(Math.random()*e*123)%e},c=function(e,t){if(e&&t){var r={},a=Math.round(t/3);return r.r=255<e.r+a?e.r-a:e.r+a,r.g=255<e.g+a?e.g-a:e.g+a,r.b=255<e.b+a?e.b-a:e.b+a,r}return{r:n(256),g:n(256),b:n(256)}},s=function(e,t){var r,a=l(t),n=(r=t,Math.max(20,100-2*r)),o=[e];o[0].isMain=!0;for(var i=c(e,n),s=0;s<a*a-1;s++)o.push(i);return o},t=function(e){$("#score").text(e),i=+new Date,o=c();var t=function(e){for(var t,r,a=e.length;0<a;)r=Math.floor(Math.random()*a),t=e[--a],e[a]=e[r],e[r]=t;return e}(s(o,e)),r=l(e);$("#mainColor").css({"background-color":"rgb("+o.r+","+o.g+","+o.b+")"}),$("#grid").removeClass("x2 x3 x4 x5 x6 x7 x8 x9 x10").addClass("x"+r);var a=$("#grid > div");a.hide();for(var n=0;n<t.length;n++)a.eq(n).removeClass("main checked").css({"background-color":"rgb("+t[n].r+","+t[n].g+","+t[n].b+")"}).show(),t[n].isMain&&(a.eq(n).addClass("main"),0==e&&a.eq(n).text("START"))},r=+new Date;$("#grid > div").on("touchstart",function(e){var t=+new Date;t-r<300?(e.preventDefault(),e.stopImmediatePropagation()):r=t}),$("#grid > div").on("tap",function(e){+new Date-i<300||(e.preventDefault(),e.stopImmediatePropagation(),$(this).hasClass("main")?($(this).text(""),1==level&&u(),t(level+=10)):($(this).addClass("checked"),a-=1e3))});var a,d=!1;window.level=0,t(level++);var u=function(){a=+new Date,setInterval(function(){var e=+new Date,t=Math.floor((e-a)/1e3);10<t&&(t=10),$("#time").text(10-t),10==t&&(d||(redirectResultPage(level-1),d=!0))},100)}});